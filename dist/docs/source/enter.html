<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">'use strict';
(function() {
    var Dom = Stimuli.core.Dom,
        Support = Stimuli.core.Support,
        Obj = Stimuli.core.Object;

    Stimuli.keyboard.specialKey.Enter = {

        getSequence: function(target) {
            var defaultEventConfig = {
                bubbles: true,
                cancelable: true,
                target: target
            },
            sequence = [
                Obj.merge({
                    type: &quot;keydown&quot;,
                    location: 0,
                    keyCode: 13
                }, defaultEventConfig),
                Obj.merge({
                    type: &quot;keypress&quot;,
                    location: 0
                }, defaultEventConfig)
            ];

            if (Dom.isEditable(target) &amp;&amp; !Dom.isEditableInput(target)) {

                if (Support.isWebkit) {
                    sequence.push(Obj.merge({type: 'textInput', key: '\n'}, defaultEventConfig));
                } else {
                    if (Dom.isTextArea(target)) {
                        sequence.push(function() {
                            Dom.updateEditableValue(target, '\n');
                        });
                    } else {
                        sequence.push(function() {
                            Dom.updateEditableHtml(target, '\n');
                        });
                    }

                    if (!Support.isIE8 &amp;&amp; !Support.isIE9 &amp;&amp; !Support.isIE10 &amp;&amp; Dom.isTextArea(target)) {
                        sequence.push(Obj.merge({type: 'input'}, defaultEventConfig));
                    }
                }
            }

            sequence.push(Obj.merge({
                type: &quot;keyup&quot;,
                location: 0,
                keyCode: 13
            }, defaultEventConfig));

            return sequence;
        }
    };
})();</pre>
</body>
</html>
