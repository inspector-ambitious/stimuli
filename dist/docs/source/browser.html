<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">'use strict';

<span id='Stimuli-virtual-Browser-method-constructor'><span id='Stimuli-virtual-Browser'>/**
</span></span> * @class Stimuli.virtual.Browser
 * @mixins Stimuli.core.Chainable
 * A virtual browser implementation.
 * @constructor
 * @param {Stimuli.shared.Context} context The browser context.
 * @param {Object=} options
 * @param {Number/String} options.width The iframe width in px (Number) or in % (String)
 * @param {Number/String} options.height The iframe height in px (Number) or in % (String)
 */
(function() {
    
    Stimuli.virtual.Browser = function(context, options) {
        var self = this;

        self.context = context;

        self.options = options || {};

        self.iframe = self.options.iframe || new Stimuli.browser.Iframe(context, self.options);

        self.history = self.options.history || new Stimuli.browser.History(context);

    };

    var Browser = Stimuli.virtual.Browser;

    Stimuli.core.Class.mix(Browser, Stimuli.core.Chainable);

<span id='Stimuli-virtual-Browser-method-navigateTo'>    /**
</span>     * @chainable
     * Navigates to the specified url.
     * @param {String} url The page url to load.
     */
    Browser.prototype.navigateTo = function(url) {
        var self = this;

        return self.then(function(done) {
            self.iframe.load(url, done);
        });

    };

<span id='Stimuli-virtual-Browser-method-back'>    /**
</span>     * @chainable
     * Goes back to the previously visited page.
     */
    Browser.prototype.back = function() {
        var self = this;

        return self.then(function(done) {
            self.history.go(-1, done);
        });
    };

<span id='Stimuli-virtual-Browser-method-forward'>    /**
</span>     * @chainable
     * Goes forward a page, if you have gone back first.
     */
    Browser.prototype.forward = function() {
        var self = this;

        return self.then(function(done) {
            self.history.go(1, done);
        });
    };

<span id='Stimuli-virtual-Browser-method-reload'>    /**
</span>     * @chainable
     * Reloads current page.
     */
    Browser.prototype.reload = function() {
        var self = this;

        return self.then(function(done) {
            self.history.go(0, done);
        });
    };

<span id='Stimuli-virtual-Browser-method-destroy'>    /**
</span>     * @chainable
     * Destroys the virtual browser.
     */
    Browser.prototype.destroy = function(callback) {
        var self = this;
        return self.defer(function(done) {

            var history = self.history;
            var iframe = self.iframe;
            self.iframe = null;
            self.history = null;
            self.context = null;

            if (history) {
                history.destroy();

            }




            if (iframe) {
                iframe.destroy(done);

            }

        }, callback);
    };

})();</pre>
</body>
</html>
